angular.module("formRendererTemplates",["scripts/directives/partials/field/checkbox.html","scripts/directives/partials/field/date.html","scripts/directives/partials/field/dropdown.html","scripts/directives/partials/field/email.html","scripts/directives/partials/field/hidden.html","scripts/directives/partials/field/password.html","scripts/directives/partials/field/radio.html","scripts/directives/partials/field/rte.html","scripts/directives/partials/field/tags.html","scripts/directives/partials/field/textarea.html","scripts/directives/partials/field/textfield.html","scripts/directives/partials/field/url.html","scripts/directives/partials/form/formGenerator.html","scripts/directives/partials/form/formSingleColumn.html","scripts/directives/partials/form/formTwoColumn.html"]),angular.module("scripts/directives/partials/field/checkbox.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/partials/field/checkbox.html",'<div class="field-editor" ng-show="isvisible">\n    <label>\n        {{field.label}}\n    </label>\n    <input ng-model="localModel" type="checkbox"/>\n</div>\n')}]),angular.module("scripts/directives/partials/field/date.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/partials/field/date.html",'<div>\n    <label>\n        {{field.label}}\n    </label>\n  <input type="text" ng-disabled="disabled" placeholder="{{field.placeholder}}" ng-model="localModel" name="fieldName" ng-required="field.required" data-date-format="{{field.datepickerOptions.format}}" data-date-end-date="{{field.datepickerOptions.endDate}}" min-view-mode="{{field.datepickerOptions.minViewMode}}" start-view="{{field.datepickerOptions.startView}}"  bs-datepicker>\n    <p class="text-error" ng-show="fieldForm.fieldName.$error.required && fieldForm.fieldName.$dirty">This field is required</p>\n</div>')}]),angular.module("scripts/directives/partials/field/dropdown.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/partials/field/dropdown.html",'<div>\n    <label>{{field.label}}</label>\n    <div>\n        <select ng-disabled="disabled" ng-model="localModel" name="fieldName" ng-options="{{field.ngOptions}}" ng-required="field.required">\n        </select>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.required && fieldForm.fieldName.$dirty">This field is required</p>\n    </div>\n</div>\n')}]),angular.module("scripts/directives/partials/field/email.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/partials/field/email.html",'<div>\n    <label>{{field.label}}</label>\n    <div>\n        <input ng-disabled="disabled" type="email" placeholder="{{field.placeholder}}" ng-model="localModel" name="fieldName"  ng-required="field.required" />\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.required && fieldForm.email.$dirty">This field is required</p>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.email">This is not a valid email.</p>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.maxlength">Please enter no more than 254 characters.</p>\n    </div>\n</div>\n')}]),angular.module("scripts/directives/partials/field/hidden.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/partials/field/hidden.html",'<input type="hidden" name="fieldName" ng-model="localModel" />\n\n\n')}]),angular.module("scripts/directives/partials/field/password.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/partials/field/password.html",'<div>\n    <label>{{field.label}}</label>\n    <div>\n        <input ng-disabled="disabled" type="password" placeholder="{{field.placeholder}}" ng-model="localModel" name="fieldName" ng-required="{{field.required}}" ng-minlength="{{field.minLength}}" ng-maxlength="{{field.maxLength}}" />\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.required && fieldForm.fieldName.$dirty">This field is required</p>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.minlength">Please enter at least {{field.minLength}} characters</p>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.maxlength">Please max {{field.maxLength}} characters</p>\n        <p class="text-error" ng-show="fieldForm.fieldName.$dirty && fieldForm.fieldName.$error.dontMatch">Passwords don\'t match!</p>\n    </div>\n</div>\n')}]),angular.module("scripts/directives/partials/field/radio.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/partials/field/radio.html",'<div>\n    <label>{{field.label}}</label>\n    <div>\n        <div ng-repeat="option in field.options">\n            <label>\n                <input type="radio" ng-model="$parent.localModel" value="{{option}}" name="fieldName"  ng-required="field.required" />\n                {{option}}\n            </label>\n           \n        </div>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.required && fieldForm.fieldName.$dirty">This field is required</p>\n    </div>\n</div>\n')}]),angular.module("scripts/directives/partials/field/rte.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/partials/field/rte.html",'<div>\n    <label>{{field.label}}</label>\n    <div>\n        <textarea ng-disabled="disabled" placeholder="{{field.placeholder}}" ui-tinymce="tinymceOptions" tinymce-options="field.tinymceOptions" ng-model="localModel" ng-bind="field.validation" name="fieldName" ng-required="field.required"></textarea>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.required && fieldForm.fieldName.$dirty">This field is required</span>\n    </div>\n</div>')}]),angular.module("scripts/directives/partials/field/tags.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/partials/field/tags.html",'<div>\n    <label>{{field.label}}</label>\n    <p ng-show="field.description" ng-bind-html-unsafe="field.description"></p>\n    <div id="custom-autocomplete">\n        <tags-selection tags="localModel" tags-type="field.tagsType" save="updateTagsModel()" tags-theme="{{field.cssStyle}}"></tags-selection>\n\n\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.required && fieldForm.fieldName.$dirty">This field is required</p>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.minlength">Please enter at least {{field.minLength}} characters</p>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.maxlength">Please max {{field.maxLength}} characters</p>\n    </div>\n</div>')}]),angular.module("scripts/directives/partials/field/textarea.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/partials/field/textarea.html",'<div class="field-editor">\n    <label>{{field.label}}</label>\n    <div>\n        <textarea rows="{{field.rows}}" class="{{field.cssStyle}}" ng-disabled="disabled" type="text" placeholder="{{field.placeholder}}" ng-model="localModel" name="fieldName" ng-minlength="field.minLength" ng-maxlength="field.maxLength" ng-required="field.required"></textarea>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.required && fieldForm.fieldName.$dirty">This field is required</p>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.minlength">Please enter at least {{field.minLength}} characters</p>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.maxlength">Please enter no more than {{field.maxLength}} characters</p>\n    </div>\n</div>\n')}]),angular.module("scripts/directives/partials/field/textfield.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/partials/field/textfield.html",'<div>\n    <label>{{field.label}}</label>\n    <div  id="{{field.name}}"> \n        <input class="{{field.cssStyle}}" ng-disabled="disabled" type="text" placeholder="{{field.placeholder}}" ng-model="localModel" name="fieldName" ng-required="field.required" ng-minlength="{{field.minLength}}" ng-maxlength="{{field.maxLength}}" ng-pattern="field.pattern" />   \n        <p class="text-error" ng-show="fieldForm.fieldName.$error.required && fieldForm.fieldName.$dirty">This field is required</p>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.minlength">Please enter at least {{field.minLength}} characters</p>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.maxlength">Please enter no more than {{field.maxLength}} characters</p>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.pattern">{{field.patternMsg}}</p>\n    </div>\n</div>\n')}]),angular.module("scripts/directives/partials/field/url.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/partials/field/url.html",'<div>\n    <label>{{field.label}}</label>\n    <div>\n        <input class="{{field.cssStyle}}" ng-disabled="disabled" type="url" placeholder="{{field.placeholder}}" ng-model="localModel" name="fieldName" ng-required="field.required" ng-minlength="{{field.minLength}}" ng-maxlength="{{field.maxLength}}" />\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.required && fieldForm.fieldName.$dirty">This field is required</p>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.url">Please provide a valid url with http:// or https:// (e.g. http://www.mycompanyname.com)</p>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.minlength">Please enter at least {{field.minLength}} characters</p>\n        <p class="text-error" ng-show="fieldForm.fieldName.$error.maxlength">Please enter no more than {{field.maxLength}} characters</p>\n    </div>\n</div>')}]),angular.module("scripts/directives/partials/form/formGenerator.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/partials/form/formGenerator.html",'<div>\n    <div ng-repeat="field in configuration.fields"  class="{{field.template}}">   \n        <formulate field="field" ng-model="modelb" ng-form="fieldForm" template="{{field.template}}"></formulate>\n    </div>\n</div>\n')}]),angular.module("scripts/directives/partials/form/formSingleColumn.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/partials/form/formSingleColumn.html",'<div>\n     <form name="editForm" novalidate>\n         <form-field-renderer>           \n         </form-field-renderer>\n         <div ng-hide="hideFormActions" class="form-actions">\n             <button ng-show="showSubmit" class="btn save medium white" ng-click="submit()" ng-disabled="(isSubmitting == \'true\') || editForm.$invalid || editForm.$pristine" >save</button>\n             <a ng-show="showCancel" class="btn btn-warning cancel" ng-click="cancel()">cancel</a>\n         </div> \n     </form>\n</div>')}]),angular.module("scripts/directives/partials/form/formTwoColumn.html",[]).run(["$templateCache",function(a){a.put("scripts/directives/partials/form/formTwoColumn.html",'<div>\n    <form name="editForm" novalidate class="form-horizontal">\n        <form-field-renderer></form-field-renderer>\n        <div class="container">\n            <div class="left-column pull-left span5">\n            </div>\n            <div class="right-column pull-left span5">\n            </div>\n        </div>\n         <div ng-hide="hideFormActions" class="form-actions">\n            <button ng-show="showSubmit" class="btn save medium white" ng-click="submit()" ng-disabled="(isSubmitting == \'true\') || editForm.$invalid || editForm.$pristine" >save</button>\n             <a ng-show="showCancel" class="btn btn-warning cancel" ng-click="cancel()">cancel</a>\n        </div>\n    </form> \n</div>\n')}]);var formRendererComponent=angular.module("formRenderer",["formRendererTemplates"]);formRendererComponent.directive("formFieldRenderer",function(){return{restrict:"E",templateUrl:"scripts/directives/partials/form/formGenerator.html",replace:!0,transclude:!0,require:"?^form",link:function(a,b,c,d){a.form=d,a.save=function(){a.submitFunction()}}}}),formRendererComponent.directive("formulate",["$http","$compile","$parse","$templateCache",function(a,b,c,d){var e=function(a){var b=a.type,c="";switch(b){case"text":c="scripts/directives/partials/field/textfield.html";break;case"email":c="scripts/directives/partials/field/email.html";break;case"url":c="scripts/directives/partials/field/url.html";break;case"textarea":c="scripts/directives/partials/field/textarea.html";break;case"checkbox":c="scripts/directives/partials/field/checkbox.html";break;case"dropdown":c="scripts/directives/partials/field/dropdown.html";break;case"hidden":c="scripts/directives/partials/field/hidden.html";break;case"password":c="scripts/directives/partials/field/password.html";break;case"radio":c="scripts/directives/partials/field/radio.html";break;case"rte":c="scripts/directives/partials/field/rte.html";break;case"date":c="scripts/directives/partials/field/date.html";break;default:c="scripts/directives/partials/field/textfield.html"}return c},f=function(f,g,h){var i=f.$new();i.field=i.$eval(h.field),i.field.pattern=new RegExp(i.field.pattern);var j=i.field.type;"textarea"===j&&(i.field.rows||(i.field.rows=5)),"date"===j&&(i.field.datepickerOptions||(i.field.datepickerOptions={format:"dd/mm/yyyy",endDate:new Date})),i.field.pattern&&(i.field.patternMsg||(i.field.patternMsg="This field should contain only digits")),i.field.onChange&&(i.onChange=c(i.field.onChange)),i.parentModel=c(i.field.model),i.disabled=c(i.field.disabled)(f)||!1,i.isvisible=c(i.field.isvisible)(f)||!0,i.$watch(function(){return c(i.field.model)(f)},function(){i.localModel=i.parentModel(f)}),i.$watch(function(){return c(i.field.isvisible)(f)},function(a){angular.isDefined(a)&&(i.isvisible=a)}),i.$watch(function(){return c(i.field.disabled)(f)},function(a){angular.isDefined(a)&&(i.disabled=a)});var k=null;i.parentModel&&(i.localModel=i.parentModel(f),k=i.localModel,angular.isDefined(i.configuration)&&i.configuration.updateOnChange&&i.$watch("localModel",function(){"function"==typeof i.parentModel.assign&&i.parentModel.assign(f,i.localModel),angular.isDefined(i.onChange)&&i.onChange()}));var l=e(i.field);a.get(l,{cache:d}).success(function(a){g.html(a),b(g.contents())(i),i.$last&&i.$emit("form:ready")}),i.$on("form:reset",function(){i.localModel=k,"function"==typeof i.parentModel.assign&&i.parentModel.assign(f,i.localModel)}),i.$on("form:submit",function(){"function"==typeof i.parentModel.assign&&i.parentModel.assign(f,i.localModel)}),f.$on("$destroy",function(){i.$destroy()})};return{template:"<div></div>",restrict:"E",replace:!0,require:"ngModel",compile:function(){return{pre:f,post:function(a,b,c){var d=a.$new();d.field=d.$eval(c.field);var e=$("div.left-column"),f=$("div.right-column");"right"===d.field.template&&f.append(b),"left"===d.field.template&&e.append(b)}}}}}]),formRendererComponent.directive("formRenderer",["$http","$compile","$parse","$templateCache","$timeout",function(a,b,c,d){return{restrict:"E",replace:!0,template:"<div></div>",transclude:!0,require:"?^form",scope:{configuration:"=",submitFunction:"&",templateConfiguration:"@"},link:function(c,e,f,g){if(c.configuration){c.reEval=function(){c.model=c.$parent.$eval(c.configuration.model)},c.reEval(),c.isReady=!1,c.$on("form:ready",function(){c.isReady=!0}),c.form=g;var h=function(a){var b=a.template.type||"oneColumn",c="";switch(b){case"oneColumn":c="scripts/directives/partials/form/formSingleColumn.html";break;case"twoColumns":c="scripts/directives/partials/form/formTwoColumn.html";break;default:c="scripts/directives/partials/form/formSingleColumn.html"}return c},i=h(c.configuration);a.get(i,{cache:d}).success(function(a){e.html(a),b(e.contents())(c)}),c.close=function(){c.closeMsg="I was closed at: "+new Date,c.shouldBeOpen=!1},c.cancel=function(){c.close(),c.reset()},c.reset=function(){c.form.$setPristine(),c.$broadcast("form:reset")},c.showSubmit=c.configuration.actions&&c.configuration.actions.submit?c.configuration.actions.submit:!0,c.showCancel=c.configuration.actions&&c.configuration.actions.cancel?c.configuration.actions.cancel:!0,c.showClose=c.configuration.actions&&c.configuration.actions.close?c.configuration.actions.close:!1,c.hideFormActions=c.configuration.hideFormActions?c.configuration.hideFormActions:!1}},controller:FormRendererController}}]);var FormRendererController=function(a){a.isSubmitting=!1,a.submit=function(){a.isSubmitting=!0,a.$broadcast("form:submit");var b=a.submitFunction(a.configuration.name);b.success?b.success(function(){postSubmit(!0)}):b.then?b.then(function(){postSubmit(!0)}):(b.error(postSubmit(!1)),console.log("WARNING: submit() did not return a promise!! ChangeTracking state will not be updated"))},a.delete=function(){var b=a.deleteFunction();b.success?b.error():b.then?b.then():(b.error(),console.log("WARNING: submit() did not return a promise!! ChangeTracking state will not be updated"))},a.$on("form:submitted",function(){postSubmit(!0)})};FormRendererController.$inject=["$scope","$element","$attrs","$transclude"],formRendererComponent.directive("uiTinymce",["RteOptions",function(a){return{require:"ngModel",compile:function(){return{pre:function(b,c,d){var e=b.$eval(d.tinymceOptions);e?b.tinymceOptions=angular.copy(e):a&&(b.tinymceOptions=angular.copy(a))}}}}}]);